{{#section "stylesheets"}}
<link rel="stylesheet" href="/public/css/admin/manageCategory.css">
{{/section}}

<div>
    <h1 class="text-center fw-bold h3">Manage categories</h1>
    <button id="addRootButton" class="btn btn-primary" role="button" onclick="actionAddRoot()">
        Add new root category
    </button>
    <form method="post" id="addRootAction" action="/admin/manage/categories" hidden>
        <div class="form-group">
            <h2 class="h4">Name category: </h2>
            <input type="text" class="form-control" name="rootCateName" aria-describedby="emailHelp"
                placeholder="Ex: Electronic">
            <input type="hidden" name="content" value="addRootCate">
            <small class="form-text text-muted">Name of root category you want to add.</small>
        </div>
        <p class="d-flex justify-content-center">
            <button class="btn bg-primary text-white" type="submit">
                Submit
            </button>
        </p>
    </form>
    <ul class="list-group list-group-flush products-root mt-3">
        {{#each parentCategories as |parent|}}
        <li class="list-group-item list-group-item-action" id="parentCat{{parent.catId}}">
            <a href="javascript:;">
                <p class="d-flex flex-row justify-content-between">
                    <span>
                        <i class="fa fa-arrow-down" aria-hidden="true" onclick="onClick({{parent.catId}})"></i>
                        {{parent.catName}}

                        <div style="text-align: end;">
                            <form method="get" action="/admin/manage/categories/addChildCat">
                                <input type="hidden" value="{{parent.catId}}" name="catId">
                                <input type="hidden" value="{{parent.catName}}" name="catName">
                                <button type="submit" class="btn btn-success">
                                  <i class="fa fa-plus-square-o" aria-hidden="true"></i>
                                </button>
                            </form>

                            <form method="get" action="/admin/manage/categories/editCat">
                                <input type="hidden" value="{{parent.catId}}" name="catId">
                                <input type="hidden" value="{{parent.catName}}" name="catName">
                                <button type="submit" class="btn btn-primary">
                                  <i class="fa fa-pencil-square-o"
                                        aria-hidden="true"></i>
                                </button>
                            </form>

                            <form style="display: inline;" method="post" action="/admin/manage/categories">
                                <input type="hidden" value="deleteRootCate" name="content">
                                <input type="hidden" value="{{parent.catId}}" name="rootCateId">
                                <button type="submit" class="btn btn-danger">
                                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                                </button>
                            </form>
                        </div>

                    </span>

                </p>

            </a>
            <ul class="products-child" id="child{{parent.catId}}">
                {{#each ../childCategories as |child|}}
                {{#if (isChildOf child.parentId parent.catId)}}


                <li>
                    <div class="d-flex justify-content-between">
                        
                            <a href="/category?catId={{child.catId}}">{{child.catName}}</a>
                            <span>
                            <form method="get" action="/admin/manage/categories/editCat">
                                <input type="hidden" value="{{child.catId}}" name="catId">
                                <input type="hidden" value="{{child.catName}}" name="catName">
                                <button type="submit" class="btn btn-primary" style="font-size: 15px;"><i class="fa fa-pencil-square-o"
                                        aria-hidden="true"></i></button>
                            </form>

                            <form method="post" action="/admin/manage/categories">
                                <input type="hidden" value="deleteChildCate" name="content">
                                <input type="hidden" value="{{child.catId}}" name="childCateId">
                                <button type="submit" class="btn btn-danger" style="font-size: 15px;"> <i class="fa fa-trash-o"
                                        aria-hidden="true"></i></button>
                            </form>
                        </span>
                    </div>
                
                </li>


                {{/if}}
                {{/each}}
            </ul>
        </li>
        {{/each}}
    </ul>
</div>
{{#section "scripts"}}
<script src="/public/js/admin/manageCategory.js"></script>
{{/section}}